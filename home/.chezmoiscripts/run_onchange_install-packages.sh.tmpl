#!/usr/bin/env sh

set -e

{{ if eq .packageManager "brew" -}}
# Brewfile hash: {{ include "private_dot_config/private_homebrew/Brewfile" | sha256sum }}
command -v brew > /dev/null \
  && brew update \
  && brew bundle --file="$HOME/.config/homebrew/Brewfile" \
  && brew upgrade \
  && brew cleanup
{{ end -}}

{{ if eq .packageManager "paru" -}}
paru -S --needed --noconfirm - <<EOF
{{ range .packages.aur -}}
{{ . }}
{{ end -}}
EOF
{{ end -}}

{{ if eq .packageManager "yay" -}}
yay -S --needed --noconfirm - <<EOF
{{ range .packages.aur -}}
{{ . }}
{{ end -}}
EOF
{{ end -}}

# Mise config hash: {{ include "private_dot_config/private_mise/config.toml" | sha256sum }}
command -v mise > /dev/null \
  && mise install
