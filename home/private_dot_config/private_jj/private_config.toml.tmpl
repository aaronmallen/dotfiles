#:schema https://jj-vcs.github.io/jj/latest/config-schema.json

[aliases]
ll = ["log", "--template", "builtin_log_detailed"]

[git]
private-commits = "private() | wip()"

[revset-aliases]
"mine()" = "author(exact:'{{- .fullName }}') | author(exact:'{{- .email }}')"
"private()" = "description(glob:'private:*')"
"wip()" = "description(glob:'wip:*')"

[signing]
behavior = "own"
backend = "gpg"
key = "87133702D8F60DD8"

[templates]
log_node = """
  label("node", coalesce(
    if(!self, label("elided", "~")),
    label(
      separate(" ",
        if(current_working_copy, "working_copy"),
        if(conflict, "conflict"),
        if(immutable, "immutable"),
        if(description.starts_with("[WIP]"), "wip"),
        if(description.starts_with("wip:"), "wip"),
        if(description.starts_with("[PRIVATE]"), "private"),
        if(description.starts_with("private:"), "private"),
      ),
      coalesce(
        if(current_working_copy, "@"),
        if(conflict, "x"),
        if(immutable, "◆"),
        if(description.starts_with("[WIP]"), "⚙"),
        if(description.starts_with("wip:"), "⚙"),
        if(description.starts_with("[PRIVATE]"), "◇"),
        if(description.starts_with("private:"), "◇"),
        "○",
      )
    )
  ))
  """

[ui]
default-command = "log"
diff-editor = "meld"
diff-formatter = ":git"
editor = "nvim"
merge-editor = "meld"
pager = "delta"
paginate = "auto"
show-cryptographic-signatures = true

[user]
name = {{- .fullName | quote }}
email = {{- .email | quote }}
